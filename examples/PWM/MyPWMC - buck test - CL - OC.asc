Version 4
SHEET 1 2880 1268
WIRE 1504 -96 1344 -96
WIRE 1632 -96 1504 -96
WIRE 1632 -64 1632 -96
WIRE 992 -32 352 -32
WIRE 1344 -32 1344 -96
WIRE 1104 48 1056 48
WIRE 1248 48 1184 48
WIRE 1296 48 1248 48
WIRE 576 64 176 64
WIRE 672 64 576 64
WIRE 992 64 992 -32
WIRE 992 64 880 64
WIRE 352 80 352 -32
WIRE 1632 80 1632 16
WIRE 176 96 176 64
WIRE 672 96 512 96
WIRE 976 112 880 112
WIRE 1056 112 1056 48
WIRE 1056 112 976 112
WIRE 672 128 544 128
WIRE 672 160 624 160
WIRE 1312 160 880 160
WIRE 1344 160 1344 64
WIRE 1344 160 1312 160
WIRE 352 192 352 160
WIRE 432 192 352 192
WIRE 512 192 512 96
WIRE 512 192 432 192
WIRE 672 192 592 192
WIRE 928 208 880 208
WIRE 944 208 928 208
WIRE 176 224 176 176
WIRE 624 224 624 160
WIRE 672 224 624 224
WIRE 352 240 352 192
WIRE 1344 240 1344 160
WIRE 1504 240 1344 240
WIRE 1792 240 1584 240
WIRE 1888 240 1792 240
WIRE 2080 240 1968 240
WIRE 2176 240 2080 240
WIRE 2240 240 2176 240
WIRE 2448 240 2240 240
WIRE 624 256 624 224
WIRE 672 256 624 256
WIRE 944 256 880 256
WIRE 992 256 944 256
WIRE 2240 272 2240 240
WIRE 992 288 992 256
WIRE 1792 304 1792 240
WIRE 2080 304 2080 240
WIRE 1344 320 1344 240
WIRE 2448 320 2448 240
WIRE 352 368 352 320
WIRE 624 368 624 256
WIRE 992 400 992 368
WIRE 2240 400 2240 352
WIRE 2192 416 2144 416
WIRE 1344 448 1344 384
WIRE 2448 448 2448 400
WIRE 2640 448 2448 448
WIRE 2192 464 2176 464
WIRE 2176 480 2176 464
WIRE 2448 480 2448 448
WIRE 992 496 992 464
WIRE 1792 544 1792 368
WIRE 1840 544 1792 544
WIRE 1968 544 1920 544
WIRE 2080 544 2080 384
WIRE 2080 544 1968 544
WIRE 2240 544 2240 480
WIRE 2240 544 2080 544
WIRE 1792 560 1792 544
WIRE 2448 624 2448 560
WIRE 544 672 544 128
WIRE 1328 672 544 672
WIRE 2640 672 2640 448
WIRE 2640 672 1328 672
WIRE 592 736 592 192
WIRE 1328 736 592 736
WIRE 1968 736 1968 544
WIRE 1968 736 1328 736
WIRE 2144 816 2144 416
WIRE 2144 960 2144 896
FLAG 176 224 0
FLAG 352 368 0
FLAG 1632 80 0
FLAG 1248 48 gate
FLAG 1792 560 0
FLAG 2176 240 out
FLAG 1344 448 0
FLAG 1504 -96 dc
FLAG 576 64 VCC
FLAG 624 368 0
FLAG 432 192 Vref
FLAG 976 112 pwm
FLAG 1312 160 s
FLAG 928 208 sw
FLAG 2448 624 0
FLAG 992 496 0
FLAG 1328 672 Vfeedback
FLAG 1328 736 overcurrent
FLAG 2144 960 0
FLAG 2176 480 0
FLAG 944 256 comp
SYMBOL voltage 176 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL res 336 64 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 336 224 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL voltage 1632 -80 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V7
SYMATTR Value 10
SYMBOL nmos 1296 -32 R0
SYMATTR InstName M1
SYMATTR Value IRFZ48N
SYMBOL res 1088 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rg1
SYMATTR Value 10
SYMBOL schottky 1360 384 R180
WINDOW 0 88 53 Left 2
WINDOW 3 55 22 Left 2
SYMATTR InstName D1
SYMATTR Value MBR735
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1776 304 R0
WINDOW 0 -57 7 Left 2
WINDOW 3 -60 42 Left 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.15
SYMBOL res 2064 288 R0
SYMATTR InstName Rload
SYMATTR Value 1
SYMBOL ind2 1488 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 50µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=0.05
SYMBOL MyPWMC 752 160 R0
WINDOW 0 -62 -148 Bottom 2
WINDOW 38 -26 -117 Bottom 2
WINDOW 3 -33 147 Bottom 2
SYMATTR InstName U1
SYMATTR Value f=200k
SYMBOL res 2432 304 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 2432 464 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 976 272 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL cap 976 400 R0
SYMATTR InstName C2
SYMATTR Value 33n
SYMBOL res 1936 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.0286
SYMBOL sw 2240 496 M180
SYMATTR InstName S1
SYMATTR Value MySW
SYMBOL voltage 2144 800 R0
WINDOW 3 60 46 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 300u 100n 100n 200u 1s)
SYMATTR InstName V1
SYMBOL res 1872 224 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rmeas
SYMATTR Value 1m
SYMBOL res 2224 256 R0
SYMATTR InstName Rload1
SYMATTR Value 0.5
TEXT 1664 376 Left 2 ;ESR=0.15
TEXT 1496 288 Left 2 ;ESR=0.05
TEXT 792 -112 Left 2 !.tran 0 800u 0 uic
TEXT 2192 912 Left 2 !.model MySW SW (Ron=10m Roff=10meg Vt=0.5 Vh=-0.2)
TEXT 1728 608 Left 2 ;7A overcurrent limit
TEXT 488 -120 Left 2 !.options reltol=0.01
